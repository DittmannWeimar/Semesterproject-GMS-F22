grammar dk.gms.dsl.DeviceDefinition with org.eclipse.xtext.common.Terminals

generate deviceDefinition "http://www.gms.dk/dsl/DeviceDefinition"

System:
	'System' name=ID master=Master graphs += Graph*
;

Graph:
	'name' name=ID
	'type' type = GraphType
	'category' category = STRING
	'title' title = STRING
	'xlabel' xlabel = STRING
	'ylabel' ylabel = STRING
;

enum GraphType:
	Line | BoxPlot | Histogram
;
	
Master:
	'name' name=ID
	'bluetooth' bluetoothName=STRING
	slaves += Slave+
;

Slave:
	'name' name=ID
	'bluetooth' bluetoothName=STRING
	sensors += Sensor*
	actuators += Actuator*
;

Sensor:
	'type' type = SensorType
	'pins' '(' pins += INT* (',' pins += INT)* ')'
	graph = [Graph]
;

enum SensorType:
	Moisture | Temperature | HumidityAndTemperature | AirHumidity | CO2 | Light
;

Actuator:
	'type' type = ActuatorType
	'pins' '(' pins += INT* (',' pins += INT)* ')'
	settings += Setting*
;

enum ActuatorType:
	LED | WaterPump
;

Setting:
	'name' name=ID
	'default' value=INT
;